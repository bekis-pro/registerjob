{% extends "layout.html" %} {% block content %}

<img
  src="{{ url_for('static', filename='banner.png') }}"
  alt="tng-img"
  style="width: 100%; height: 100%; background: #c5a572"
/>

<div
  id="loadingContent"
  style="
    display: none;
    max-width: 500px;
    margin: 15px auto;
    padding: 25px 20px;
    background: #ffffff;
    border: 1px solid #ddd;
    border-radius: 10px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
    text-align: center;
    box-sizing: border-box;
  "
>
  <!-- Gambar proses -->
  <img
    id="loadingGif"
    src="processing.gif"
    alt="Loading..."
    style="margin: 0 auto 20px; width: 100px; height: 100px; display: block"
  />

  <!-- Mesej utama -->
  <p
    id="formMessage"
    style="
      font-size: 16px;
      color: #2c3e50;
      font-weight: 500;
      line-height: 1.6;
      margin-bottom: 20px;
    "
  >
    âœ… Maklumat anda telah
    <strong style="color: green">diterima</strong> dan kini sedang diproses.
    <br />Sila tunggu sementara sistem kami menjalankan semakan kelayakan bagi
    <strong>anda.</strong> anda. <br /><br />Tempoh pemprosesan adalah dalam
    lingkungan 10 minit. Mohon jangan tutup atau muat semula halaman ini untuk
    mengelakkan gangguan proses.
  </p>

  <!-- Progress bar -->
  <div
    style="
      width: 100%;
      background-color: #f0f0f0;
      border-radius: 10px;
      overflow: hidden;
      height: 22px;
      margin-bottom: 25px;
      border: 1px solid #ccc;
    "
  >
    <div
      id="progressBar"
      style="
        width: 1%;
        height: 100%;
        background-color: #27ae60;
        text-align: center;
        color: white;
        font-size: 13px;
        line-height: 22px;
        font-weight: bold;
      "
    >
      1%
    </div>
  </div>

  <!-- Butang alternatif -->
  <button
    id="useAnotherPhone"
    style="
      width: 100%;
      padding: 12px;
      background-color: #f39c12;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s ease;
      box-shadow: 0 4px 12px rgba(243, 156, 18, 0.2);
    "
  >
    Guna Nombor Telefon Lain
  </button>
</div>

<!-- Script untuk progress bar -->
<script>
  function startProgressBar(duration = 600000) {
    const progressBar = document.getElementById("progressBar");
    let width = 1;
    const intervalTime = duration / 100;

    const interval = setInterval(() => {
      if (width >= 100) {
        clearInterval(interval);
      } else {
        width++;
        progressBar.style.width = width + "%";
        progressBar.innerText = width + "%";
      }
    }, intervalTime);
  }

  // Auto-trigger jika elemen sudah tampil
  document.addEventListener("DOMContentLoaded", () => {
    const loadingEl = document.getElementById("loadingContent");
    if (loadingEl.style.display !== "none") {
      startProgressBar();
    }
  });

  // Trigger manual
  function showLoadingContent() {
    document.getElementById("loadingContent").style.display = "block";
    startProgressBar();
  }
</script>

{% endblock %}
